<!-- BEGIN PAGE TITLE-->
<!-- END PAGE TITLE-->
<!-- END PAGE HEADER-->
<div class="container-fluid">
<div class="row">
	<div class="col-md-12">
         <div class="portlet light">
           <div class="portlet-title">
               <div class="caption">
                   <i class="icon-note font-dark"></i>
                   <span class="caption-subject font-dark sbold">增减配项目信息</span><span class="caption-helper"> </span>
               </div>

           </div>
           <div class="portlet-body form">
           	<form class="form-horizontal" method="post" data-options="novalidate:false" id="ff">
           	<div class="form-body">
          		      	 <input type="hidden" name="bpvi.id" value="${(bpvi.id)!}" />
          		      	 <input type="hidden" name="bpvi.budget_id" value="${(budget_id)!}" />		
                        <div class="form-group">
                           <label class="col-md-3 control-label">增减配项目名称</label>
                           <div class="col-md-6">                          		
                               <input type="text" class="form-control easyui-validatebox" data-options="missingMessage:'请输入增减配项目名称',required:true" name="bpvi.name" value="${(bpvi.name)!}" />
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">单位</label>
                           <div class="col-md-6">                          		
                               <input type="text" class="form-control easyui-validatebox input-medium" data-options="missingMessage:'请输入单位',required:true" name="bpvi.unit" value="${(bpvi.unit)!}" />
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">型号</label>
                           <div class="col-md-6">                          		
                               <input type="text" class="form-control easyui-validatebox input-medium" data-options="missingMessage:'请输入型号'" name="bpvi.model" value="${(bpvi.model)!}" />
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">规格</label>
                           <div class="col-md-6">                          		
                               <input type="text" class="form-control easyui-validatebox input-medium" data-options="missingMessage:'请输入规格'" name="bpvi.space" value="${(bpvi.space)!}" />
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">品牌</label>
                           <div class="col-md-6">                          		
                               <input type="text" class="form-control easyui-validatebox input-medium" data-options="missingMessage:'请输入品牌'" name="bpvi.brand_name" value="${(bpvi.brand_name)!}" />
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">数量</label>
                           <div class="col-md-6"> 
                           <input type="number" class="input-small form-control easyui-validatebox" id="num" onblur="updateAmount()" data-options="missingMessage:'请输入数量',required:true" name="bpvi.num" value="${(bpvi.num)!1}" />                                  
                       		*若为增项，请输入整数；若为减项，请输入负数。
                       	</div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">单价</label>
                           <div class="col-md-6"> 
                           <input type="number" class="input-small form-control easyui-validatebox" onblur="updateAmount()" id="price" data-options="missingMessage:'请输入单价',required:true" name="bpvi.price" value="${(bpvi.price)!0}"  />                                  						
                           </div>
                       </div>
                       <div class="form-group">
                           <label class="col-md-3 control-label">总金额</label>
                           <div class="col-md-6">                                   
							<input type="text"  name="bpvi.amount"  id="amount" value="${(bpvi.amount)!"0"}" readonly="readonly" 
	                               class="form-control input-inline input-small" placeholder="">
                           </div>
                       </div>
					<div class="form-group">
                           <label class="col-md-3 control-label">备注</label> 
                           <div class="col-md-6">
                               <textarea name="bpvi.comment" rows="5" class="form-control">${(bpvi.comment)!""}</textarea>
                           </div>
                       </div>
                   <div class="form-actions">
                       <div class="row">
                           <div class="col-md-offset-3 col-md-9">
                               <button type="button" id="save" onclick="save_data();" class="btn green">提交</button>
                           </div>
                       </div>
                   </div>
           	</form>
           </div>
           </div><!-- end portlet -->
	</div><!-- end of col-->
</div><!-- end of row-->
</div><!-- end of container-->



<style type="text/css"></style>

<script type="text/javascript">

function save_data(){
	form_data_save("#ff", "/budget_package/budget_package_variation_item_update", function(data){
		$("#list").datagrid("reload");//预算中心页面
	}, {window_close:true});	
}
function updateAmount(){
	var num=$('#num').val();
	var price=$('#price').val();
	var amount=$('#amount').val((num*price).toFixed(2));
}
</script>